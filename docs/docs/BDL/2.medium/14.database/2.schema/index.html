<!DOCTYPE html>
<html lang="zh" dir="ltr">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="数据表结构在 BDL 中的使用#在数据库中，每个表的建立都会产生表结构文件，叫做schema文件。
在我们使用数据库时，如果你需要大量的数据中的资料，不需要频繁的查询数据中的表结构，通过表结构中字段的数据类型去对应BDL中的数据类型。在BDL中已经为我们做好了这一步，ORACLE中大部分数据类型在BDL中都映射到指定的类型。
我们只要使用数据库的schema文件，就能通过数据的字段去定义BDL中的数据类型。
上一章我们学到了function main() end function这种main函数写法，只会使用表结构，而不连接到数据库，指得就是使用schema文件，而不连接到数据库。
在 BDL 中使用 schema 定义变量#只要将之前定义变量中的数据类型修改为like ds:table.cloumn 即可定义这个变量类型为 ds 库中 table 这个表的 column 这个字段在数据库中的类型。
其中ds:库名可以省略，如果省略，表示使用当前已经连接到的库。
例如:
database ds main  define l_ima01 like ima_file.ima01  define l_ima02 like ima_file.ima02 end main 除了在使用ima_file字段时，可以依据ima_file字段的名称定义，在 TIPTOP 中，常用的字段类型都定义在了type_file中，可以根据 type_file 类型定义我们经常使用的变量，如金额、库存数量、单价这些常用变量。
 type_file字段清单如下
    字段名称 数据类型 字段名称 数据类型     chr1000 varchar2(1000) chr6 varchar2(6)   chr1 varchar2(1) chr50 varchar2(50)   num5 number(5) chr37 varchar2(37)   num20_6 number(20,6) chr9 varchar2(9)   dat date chr12 varchar2(12)   chr18 varchar2(18) chr30 varchar2(30)   num10 number(10) chr14 varchar2(14)   chr8 varchar2(8) chr7 varchar2(7)   chr20 varchar2(20) chr10 varchar2(10)   chr21 varchar2(21) chr100 varchar2(100)   num20 number(20) chr200 varchar2(200)   chr3 varchar2(3) chr300 varchar2(300)   num26_10 number(26,10) chr500 varchar2(500)   chr2 varchar2(2) blob blob   chr4 varchar2(4) num15_3 number(15,3)   chr5 varchar2(5) row_id varchar2(18)    进阶使用&ndash;record#在实际业务中，我们经常使用的场景是，查询一个表每个字段的数据，更新/新增一个表所有字段。">
<meta name="theme-color" content="#FFFFFF">
<meta name="color-scheme" content="light dark"><meta property="og:title" content="2.数据表结构在BDL中的使用" />
<meta property="og:description" content="数据表结构在 BDL 中的使用#在数据库中，每个表的建立都会产生表结构文件，叫做schema文件。
在我们使用数据库时，如果你需要大量的数据中的资料，不需要频繁的查询数据中的表结构，通过表结构中字段的数据类型去对应BDL中的数据类型。在BDL中已经为我们做好了这一步，ORACLE中大部分数据类型在BDL中都映射到指定的类型。
我们只要使用数据库的schema文件，就能通过数据的字段去定义BDL中的数据类型。
上一章我们学到了function main() end function这种main函数写法，只会使用表结构，而不连接到数据库，指得就是使用schema文件，而不连接到数据库。
在 BDL 中使用 schema 定义变量#只要将之前定义变量中的数据类型修改为like ds:table.cloumn 即可定义这个变量类型为 ds 库中 table 这个表的 column 这个字段在数据库中的类型。
其中ds:库名可以省略，如果省略，表示使用当前已经连接到的库。
例如:
database ds main  define l_ima01 like ima_file.ima01  define l_ima02 like ima_file.ima02 end main 除了在使用ima_file字段时，可以依据ima_file字段的名称定义，在 TIPTOP 中，常用的字段类型都定义在了type_file中，可以根据 type_file 类型定义我们经常使用的变量，如金额、库存数量、单价这些常用变量。
 type_file字段清单如下
    字段名称 数据类型 字段名称 数据类型     chr1000 varchar2(1000) chr6 varchar2(6)   chr1 varchar2(1) chr50 varchar2(50)   num5 number(5) chr37 varchar2(37)   num20_6 number(20,6) chr9 varchar2(9)   dat date chr12 varchar2(12)   chr18 varchar2(18) chr30 varchar2(30)   num10 number(10) chr14 varchar2(14)   chr8 varchar2(8) chr7 varchar2(7)   chr20 varchar2(20) chr10 varchar2(10)   chr21 varchar2(21) chr100 varchar2(100)   num20 number(20) chr200 varchar2(200)   chr3 varchar2(3) chr300 varchar2(300)   num26_10 number(26,10) chr500 varchar2(500)   chr2 varchar2(2) blob blob   chr4 varchar2(4) num15_3 number(15,3)   chr5 varchar2(5) row_id varchar2(18)    进阶使用&ndash;record#在实际业务中，我们经常使用的场景是，查询一个表每个字段的数据，更新/新增一个表所有字段。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bdl.darcyjoven.com/docs/BDL/2.medium/14.database/2.schema/" /><meta property="article:section" content="docs" />
<meta property="article:published_time" content="2023-08-24T08:36:16+08:00" />
<meta property="article:modified_time" content="2023-08-28T21:34:27+08:00" />

<title>2.数据表结构在BDL中的使用 | BDL教程</title>
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/book.min.ac63924880c7cd243ea90c2ad44653a2371275b292c12cd7bd0fcbafe3f6a0f3.css" integrity="sha256-rGOSSIDHzSQ&#43;qQwq1EZTojcSdbKSwSzXvQ/Lr&#43;P2oPM=" crossorigin="anonymous">
  <script defer src="/flexsearch.min.js"></script>
  <script defer src="/zh.search.min.56c10522bfeb864275c852e275068146a930745df1445a8ac3f3fd1fd72da1e8.js" integrity="sha256-VsEFIr/rhkJ1yFLidQaBRqkwdF3xRFqKw/P9H9ctoeg=" crossorigin="anonymous"></script>

  <script defer src="/sw.min.6f6f90fcb8eb1c49ec389838e6b801d0de19430b8e516902f8d75c3c8bd98739.js" integrity="sha256-b2&#43;Q/LjrHEnsOJg45rgB0N4ZQwuOUWkC&#43;NdcPIvZhzk=" crossorigin="anonymous"></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/"><span>BDL教程</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="搜索" aria-label="搜索" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>



  



  
    
  



<ul class="book-languages">
  <li>
    <input type="checkbox" id="languages" class="toggle" />
    <label for="languages" class="flex justify-between">
      <a role="button" class="flex align-center">
        <img src="/svg/translate.svg" class="book-icon" alt="Languages" />
        简体中文
      </a>
    </label>

    <ul>
      
      <li>
        <a href="https://bdl.darcyjoven.com/en/">
          English
        </a>
      </li>
      
    </ul>
  </li>
</ul>











  



  
  <ul>
    
      
        <li class="book-section-flat" >
          
  
  

  
    <input type="checkbox" id="section-63887b83bfdc979c57f35135504bfffc" class="toggle" checked />
    <label for="section-63887b83bfdc979c57f35135504bfffc" class="flex justify-between">
      <a href="/docs/BDL/" class="">BDL有钱途的编程语言(tiptop)</a>
    </label>
  

          
  <ul>
    
      
        <li class="book-section-flat" >
          
  
  

  
    <input type="checkbox" id="section-89caa38d410cb16b181474a7b83ba0fb" class="toggle"  />
    <label for="section-89caa38d410cb16b181474a7b83ba0fb" class="flex justify-between">
      <a role="button" class="">BDL基础</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-8570694e01377e866dd8769cca0a3ed2" class="toggle"  />
    <label for="section-8570694e01377e866dd8769cca0a3ed2" class="flex justify-between">
      <a href="/docs/BDL/1.basic/1.before_all/" class="">第一章 踏上征程前的思想动员</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/1.basic/1.before_all/1.why-dbl/" class="">1.为什么学习（使用）BDL语言</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/1.basic/1.before_all/2.how-learn-dbl/" class="">2.如何学好BDL语言</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/1.basic/1.before_all/3.what-is-language/" class="">3.语言概述</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/1.basic/1.before_all/4.program-life-cycle/" class="">4.程序开发生命周期</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/1.basic/1.before_all/5.write-your-fisrt-program/" class="">5.开始你的第一个程序</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-3bc72501c45696f4b226f48839799b4d" class="toggle"  />
    <label for="section-3bc72501c45696f4b226f48839799b4d" class="flex justify-between">
      <a href="/docs/BDL/1.basic/2.first_code/" class="">第二章 第一行代码</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/1.basic/2.first_code/1.wirte-program-by-youself/" class="">1.自己动手创建程序</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/1.basic/2.first_code/2.environment_of_BDL/" class="">2.BDL开发环境</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/1.basic/2.first_code/3.see-your-program/" class="">3.编译运行</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/1.basic/2.first_code/4.debug/" class="">4.调试排错</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/1.basic/2.first_code/5.practice/" class="">5.练习</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-10e11da0807d13140e34e2285990e2d3" class="toggle"  />
    <label for="section-10e11da0807d13140e34e2285990e2d3" class="flex justify-between">
      <a href="/docs/BDL/1.basic/3.composition_of_bdl/" class="">第三章 最简单bdl程序的组成</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/1.basic/3.composition_of_bdl/1.BDL-look/" class="">1.BDL程序全貌</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/1.basic/3.composition_of_bdl/2.annotation/" class="">2.为何要注释</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/1.basic/3.composition_of_bdl/3.main-function/" class="">3.main函数</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/1.basic/3.composition_of_bdl/4.call-function/" class="">4.函数调用</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/1.basic/3.composition_of_bdl/5.count-1&#43;1/" class="">5.计算1&#43;1</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/1.basic/3.composition_of_bdl/6.variable/" class="">6.变量</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/1.basic/3.composition_of_bdl/7.create-a-function/" class="">7.设计一个BDL函数</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/1.basic/3.composition_of_bdl/8.statement/" class="">8.语句</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/1.basic/3.composition_of_bdl/9.code-style/" class="">9.代码风格</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/1.basic/3.composition_of_bdl/10.practice/" class="">10.练习</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-d954a0c0f4ada652ecd68a56de434ffe" class="toggle"  />
    <label for="section-d954a0c0f4ada652ecd68a56de434ffe" class="flex justify-between">
      <a href="/docs/BDL/1.basic/4.how_save_and_get_data/" class="">第四章 存储和获取数据</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/1.basic/4.how_save_and_get_data/1.binary-octal-hexadecimal/" class="">1.二进制、八进制、十六进制</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/1.basic/4.how_save_and_get_data/2.bite-bit/" class="">2.字节和位</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/1.basic/4.how_save_and_get_data/3.data-types/" class="">3.数据类型</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/1.basic/4.how_save_and_get_data/4.variable/" class="">4.变量</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/1.basic/4.how_save_and_get_data/5.practice/" class="">5.练习</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-a23be7d9f2449a182157aaf1b0d447f4" class="toggle"  />
    <label for="section-a23be7d9f2449a182157aaf1b0d447f4" class="flex justify-between">
      <a href="/docs/BDL/1.basic/5.interaction_between_keybord_and_mouse/" class="">第五章 利用键盘、鼠标与程序交互</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/1.basic/5.interaction_between_keybord_and_mouse/1.input-proces-output/" class="">1.输出-处理-输出</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/1.basic/5.interaction_between_keybord_and_mouse/2.sfmt/" class="">2.display与sfmt函数</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/1.basic/5.interaction_between_keybord_and_mouse/3.format-number/" class="">3.数字的格式化</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/1.basic/5.interaction_between_keybord_and_mouse/4.input/" class="">4.输入</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/1.basic/5.interaction_between_keybord_and_mouse/5.practice/" class="">5.练习</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-d7fe71403ddec54176e1a6d5828be8e9" class="toggle"  />
    <label for="section-d7fe71403ddec54176e1a6d5828be8e9" class="flex justify-between">
      <a href="/docs/BDL/1.basic/6.operators_and_expressions/" class="">第六章 运算符和表达式-程序基本构成</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/1.basic/6.operators_and_expressions/1.operators/" class="">1.运算符和表达式</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/1.basic/6.operators_and_expressions/2.relational-operator/" class="">2.关系运算符</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/1.basic/6.operators_and_expressions/3.logical-operator/" class="">3.逻辑运算符</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/1.basic/6.operators_and_expressions/4.assignment-operator/" class="">4.赋值运算符</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/1.basic/6.operators_and_expressions/5.type-conversion/" class="">5.类型转换</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/1.basic/6.operators_and_expressions/6.operation-priority/" class="">6.运算符优先级</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/1.basic/6.operators_and_expressions/7.practice/" class="">7.练习</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-9cb9e9e6474fb16320830a8665ed0dd6" class="toggle"  />
    <label for="section-9cb9e9e6474fb16320830a8665ed0dd6" class="flex justify-between">
      <a href="/docs/BDL/1.basic/7.atoml_statement/" class="">第七章 语句-程序最小构成单元</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/1.basic/7.atoml_statement/1.statement-type/" class="">1.语句类型</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/1.basic/7.atoml_statement/2.structured-design-program/" class="">2.结构化设计程序</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/1.basic/7.atoml_statement/3.practice/" class="">3.练习</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-3e176cd6599dbc20680961374ac58eb6" class="toggle"  />
    <label for="section-3e176cd6599dbc20680961374ac58eb6" class="flex justify-between">
      <a href="/docs/BDL/1.basic/8.condition/" class="">第八章 条件判断-分支结构</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/1.basic/8.condition/1.judgment-statement-if/" class="">1.if语句--简单条件判断</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/1.basic/8.condition/2.if-else/" class="">2.if else--两条岔路的选择</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/1.basic/8.condition/3.multi-branch/" class="">3.多分枝语句和分支语句嵌套</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/1.basic/8.condition/4.case/" class="">4.case--开关语句</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/1.basic/8.condition/5.practice/" class="">5.练习</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-a341e1fadb71dba21eccbf89f2161491" class="toggle"  />
    <label for="section-a341e1fadb71dba21eccbf89f2161491" class="flex justify-between">
      <a href="/docs/BDL/1.basic/9.over_and_over_again/" class="">第九章 循环结构--一遍又一遍</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/1.basic/9.over_and_over_again/1.create-cycle/" class="">1.构造循环</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/1.basic/9.over_and_over_again/2.for/" class="">2.for结构</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/1.basic/9.over_and_over_again/3.cycle-in-cycle/" class="">3.循环嵌套</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/1.basic/9.over_and_over_again/4.cycle-and-flow-control/" class="">4.流程转向控制语句</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/1.basic/9.over_and_over_again/5.practice/" class="">5.练习</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <input type="checkbox" id="section-c6716723dcd0b7e8f0478c95636deedf" class="toggle" checked />
    <label for="section-c6716723dcd0b7e8f0478c95636deedf" class="flex justify-between">
      <a role="button" class="">渐入佳境</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-2a090047313f5c65727b369daef4dca9" class="toggle"  />
    <label for="section-2a090047313f5c65727b369daef4dca9" class="flex justify-between">
      <a href="/docs/BDL/2.medium/10.function/" class="">第十章 函数入门-写程序就是写函数</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/2.medium/10.function/1.what-is-function/" class="">1.什么是函数</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/2.medium/10.function/2.diy-function/" class="">2.自定义函数</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/2.medium/10.function/3.formal-actual/" class="">3.函数调用与返回</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/2.medium/10.function/4.process-oriented/" class="">4.面向过程编程</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/2.medium/10.function/5.practice/" class="">5.练习</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-af013eadae5d0507c05560d9c6cf66bc" class="toggle"  />
    <label for="section-af013eadae5d0507c05560d9c6cf66bc" class="flex justify-between">
      <a href="/docs/BDL/2.medium/11.array/" class="">第十一章 数组-同一类型的多个元素的集合</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/2.medium/11.array/1.what-is-array/" class="">1.什么是数组</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/2.medium/11.array/2.one-dimensional-array/" class="">2.一维数组</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/2.medium/11.array/3.two-dimensional/" class="">3.二维数组</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/2.medium/11.array/4.multi-dimensional/" class="">4.多维数组</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/2.medium/11.array/5.practice/" class="">5.练习</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-f3616fd81a7fecb20f927a9e79579b09" class="toggle"  />
    <label for="section-f3616fd81a7fecb20f927a9e79579b09" class="flex justify-between">
      <a href="/docs/BDL/2.medium/12.string/" class="">第十二章 字符串操作</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/2.medium/12.string/1.dynamic-string/" class="">1.动态长度字符串</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/2.medium/12.string/2.practice/" class="">2.练习</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-613b859b1f689b5e9dc09309bb2963b8" class="toggle"  />
    <label for="section-613b859b1f689b5e9dc09309bb2963b8" class="flex justify-between">
      <a href="/docs/BDL/2.medium/13.struct/" class="">第十三章 结构体</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/2.medium/13.struct/1.record/" class="">1.结构体</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/2.medium/13.struct/2.type/" class="">2.声明结构体类型</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/2.medium/13.struct/3.nesting-record/" class="">3.结构体嵌套</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/2.medium/13.struct/4.record-in-array/" class="">4.结构体数组嵌套</a>
  

        </li>
      
    
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-125817952e3d1ea4ebe39f22ce2c6dc2" class="toggle" checked />
    <label for="section-125817952e3d1ea4ebe39f22ce2c6dc2" class="flex justify-between">
      <a href="/docs/BDL/2.medium/14.database/" class="">第十四章 数据库使用</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/2.medium/14.database/1.%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5/" class="">1.数据库连接</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/2.medium/14.database/2.schema/" class="active">2.数据表结构在BDL中的使用</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/2.medium/14.database/3.update-insert-delete/" class="">3.插入更新删除</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/2.medium/14.database/4.select-single-row/" class="">4.查询单笔资料</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/2.medium/14.database/5.select-rows/" class="">5.多笔查询</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/2.medium/14.database/6.practise/" class="">6.练习</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-30f3022fe79a1f15ebb24e96fa4026a7" class="toggle"  />
    <label for="section-30f3022fe79a1f15ebb24e96fa4026a7" class="flex justify-between">
      <a href="/docs/BDL/2.medium/15.function_plus/" class="">第十五章 函数进阶</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/2.medium/15.function_plus/1.parameter/" class="">1.函数的参数</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/2.medium/15.function_plus/2.parament/" class="">2.函数的返回值</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/2.medium/15.function_plus/3.life-cycle/" class="">3.生命周期</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/2.medium/15.function_plus/4.practise/" class="">4.练习</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-77fe291b3afa7e47cf0a1baa2d48e2bf" class="toggle"  />
    <label for="section-77fe291b3afa7e47cf0a1baa2d48e2bf" class="flex justify-between">
      <a href="/docs/BDL/2.medium/16.module/" class="">第十六章 模块</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/2.medium/16.module/1.%E9%87%8D%E6%96%B0%E5%9B%9E%E9%A1%BE%E7%BC%96%E8%AF%91%E9%93%BE%E6%8E%A5/" class="">1.重新回顾编译链接</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/2.medium/16.module/2.lib-sub/" class="">2.lib和sub函数</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/2.medium/16.module/3.p_link/" class="">3.p_link作业</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/2.medium/16.module/4.module/" class="">4.BDL中的模块</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/2.medium/16.module/5.preprocessor/" class="">5.预编译</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/2.medium/16.module/6.practise/" class="">6.练习</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-aea1d8080c20e4f4e3c07beabc856ab8" class="toggle"  />
    <label for="section-aea1d8080c20e4f4e3c07beabc856ab8" class="flex justify-between">
      <a href="/docs/BDL/2.medium/17.interface/" class="">第十七章 用户界面</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/2.medium/17.interface/1.interface-tree/" class="">1.前言--抽象界面</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/2.medium/17.interface/2.wiget/" class="">2.控件&amp;容器</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/2.medium/17.interface/3.fglform/" class="">3.画面档文件的编译</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/2.medium/17.interface/4.window-form/" class="">4.Window&amp;Form</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/2.medium/17.interface/5.menu/" class="">4.Menu</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/2.medium/17.interface/6.display/" class="">6.DISPLAY</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/2.medium/17.interface/7.input/" class="">7.INPUT</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/2.medium/17.interface/8.construct/" class="">8.CONSTRUCT</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/BDL/2.medium/17.interface/9.practise/" class="">9.练习</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <input type="checkbox" id="section-9bd9fb382e6b3ed244b1d053297b825d" class="toggle"  />
    <label for="section-9bd9fb382e6b3ed244b1d053297b825d" class="flex justify-between">
      <a role="button" class="">BDL进阶</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-4f163508f77fe54fd4eef7f90c0174a1" class="toggle"  />
    <label for="section-4f163508f77fe54fd4eef7f90c0174a1" class="flex justify-between">
      <a role="button" class="">第十九章 异常处理</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-3533b80c4ef5db47a17c45b692d613f0" class="toggle"  />
    <label for="section-3533b80c4ef5db47a17c45b692d613f0" class="flex justify-between">
      <a href="/docs/BDL/3.advance/20.build-in-packages/" class="">第二十章 标准包</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <input type="checkbox" id="section-1b2d9f6e2935b38e2dce8583d2172c7f" class="toggle"  />
    <label for="section-1b2d9f6e2935b38e2dce8583d2172c7f" class="flex justify-between">
      <a role="button" class="">BDL实战</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-45dc22155750af7958cacd6a2952ab76" class="toggle"  />
    <label for="section-45dc22155750af7958cacd6a2952ab76" class="flex justify-between">
      <a href="/docs/BDL/4.actual-combat/1.%E5%8D%95%E6%A1%A3/" class="">第一章 单档</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-6a37b1a8ed711a7eb6a9d790c42f73fd" class="toggle"  />
    <label for="section-6a37b1a8ed711a7eb6a9d790c42f73fd" class="flex justify-between">
      <a href="/docs/BDL/4.actual-combat/2.%E5%8F%8C%E6%A1%A3/" class="">第二章 双档</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-4e455a871ac0e3640fdfb28f989fe1a1" class="toggle"  />
    <label for="section-4e455a871ac0e3640fdfb28f989fe1a1" class="flex justify-between">
      <a role="button" class="">第三章 双档</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-5fa715394aef5d5af148dce1e869ba45" class="toggle"  />
    <label for="section-5fa715394aef5d5af148dce1e869ba45" class="flex justify-between">
      <a role="button" class="">第四章 双档</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-5f745973faac9b396d210658216512d2" class="toggle"  />
    <label for="section-5f745973faac9b396d210658216512d2" class="flex justify-between">
      <a role="button" class="">第五章 批处理作业</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-4e8c5fb6439d623d00ba329ff6dc53a3" class="toggle"  />
    <label for="section-4e8c5fb6439d623d00ba329ff6dc53a3" class="flex justify-between">
      <a role="button" class="">第六章 webservice</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <a href="/docs/Practice/" class="">BDL练习题</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/Practice/basic/" class="">基础练习题</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>











  
<ul>
  
  <li>
    <a href="https://github.com/darcyjoven/bdl"  target="_blank" rel="noopener">
        Github
      </a>
  </li>
  
  <li>
    <a href="https://themes.gohugo.io/hugo-book/"  target="_blank" rel="noopener">
        Hugo Themes
      </a>
  </li>
  
</ul>






</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>2.数据表结构在BDL中的使用</strong>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#数据表结构在-bdl-中的使用">数据表结构在 BDL 中的使用</a>
      <ul>
        <li><a href="#在-bdl-中使用-schema-定义变量">在 BDL 中使用 schema 定义变量</a></li>
        <li><a href="#进阶使用--record">进阶使用&ndash;record</a></li>
        <li><a href="#注意事项">注意事项</a></li>
      </ul>
    </li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
  <article class="markdown"><h1 id="数据表结构在-bdl-中的使用">
  数据表结构在 BDL 中的使用
  <a class="anchor" href="#%e6%95%b0%e6%8d%ae%e8%a1%a8%e7%bb%93%e6%9e%84%e5%9c%a8-bdl-%e4%b8%ad%e7%9a%84%e4%bd%bf%e7%94%a8">#</a>
</h1>
<p>在数据库中，每个表的建立都会产生表结构文件，叫做<code>schema</code>文件。</p>
<p>在我们使用数据库时，如果你需要大量的数据中的资料，不需要频繁的查询数据中的表结构，通过表结构中字段的数据类型去对应<code>BDL</code>中的数据类型。在<code>BDL</code>中已经为我们做好了这一步，<code>ORACLE</code>中大部分数据类型在<code>BDL</code>中都映射到指定的类型。</p>
<p>我们只要使用数据库的<code>schema</code>文件，就能通过数据的字段去定义<code>BDL</code>中的数据类型。</p>
<p>上一章我们学到了<code>function main() end function</code>这种<code>main</code>函数写法，只会使用表结构，而不连接到数据库，指得就是使用<code>schema</code>文件，而不连接到数据库。</p>
<h2 id="在-bdl-中使用-schema-定义变量">
  在 BDL 中使用 schema 定义变量
  <a class="anchor" href="#%e5%9c%a8-bdl-%e4%b8%ad%e4%bd%bf%e7%94%a8-schema-%e5%ae%9a%e4%b9%89%e5%8f%98%e9%87%8f">#</a>
</h2>
<p>只要将之前定义变量中的数据类型修改为<code>like ds:table.cloumn</code> 即可定义这个变量类型为 ds 库中 table 这个表的 column 这个字段在数据库中的类型。</p>
<p>其中<code>ds:</code>库名可以省略，如果省略，表示使用当前已经连接到的库。</p>
<p>例如:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">database</span> ds
</span></span><span style="display:flex;"><span>main
</span></span><span style="display:flex;"><span>    define l_ima01 <span style="color:#66d9ef">like</span> ima_file.ima01
</span></span><span style="display:flex;"><span>    define l_ima02 <span style="color:#66d9ef">like</span> ima_file.ima02
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">end</span> main
</span></span></code></pre></div><p>除了在使用<code>ima_file</code>字段时，可以依据<code>ima_file</code>字段的名称定义，在 TIPTOP 中，常用的字段类型都定义在了<code>type_file</code>中，可以根据 type_file 类型定义我们经常使用的变量，如金额、库存数量、单价这些常用变量。</p>
<blockquote>
<p><code>type_file</code>字段清单如下</p>
</blockquote>
<table>
<thead>
<tr>
<th style="text-align:left">字段名称</th>
<th>数据类型</th>
<th style="text-align:left">字段名称</th>
<th>数据类型</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">chr1000</td>
<td>varchar2(1000)</td>
<td style="text-align:left">chr6</td>
<td>varchar2(6)</td>
</tr>
<tr>
<td style="text-align:left">chr1</td>
<td>varchar2(1)</td>
<td style="text-align:left">chr50</td>
<td>varchar2(50)</td>
</tr>
<tr>
<td style="text-align:left">num5</td>
<td>number(5)</td>
<td style="text-align:left">chr37</td>
<td>varchar2(37)</td>
</tr>
<tr>
<td style="text-align:left">num20_6</td>
<td>number(20,6)</td>
<td style="text-align:left">chr9</td>
<td>varchar2(9)</td>
</tr>
<tr>
<td style="text-align:left">dat</td>
<td>date</td>
<td style="text-align:left">chr12</td>
<td>varchar2(12)</td>
</tr>
<tr>
<td style="text-align:left">chr18</td>
<td>varchar2(18)</td>
<td style="text-align:left">chr30</td>
<td>varchar2(30)</td>
</tr>
<tr>
<td style="text-align:left">num10</td>
<td>number(10)</td>
<td style="text-align:left">chr14</td>
<td>varchar2(14)</td>
</tr>
<tr>
<td style="text-align:left">chr8</td>
<td>varchar2(8)</td>
<td style="text-align:left">chr7</td>
<td>varchar2(7)</td>
</tr>
<tr>
<td style="text-align:left">chr20</td>
<td>varchar2(20)</td>
<td style="text-align:left">chr10</td>
<td>varchar2(10)</td>
</tr>
<tr>
<td style="text-align:left">chr21</td>
<td>varchar2(21)</td>
<td style="text-align:left">chr100</td>
<td>varchar2(100)</td>
</tr>
<tr>
<td style="text-align:left">num20</td>
<td>number(20)</td>
<td style="text-align:left">chr200</td>
<td>varchar2(200)</td>
</tr>
<tr>
<td style="text-align:left">chr3</td>
<td>varchar2(3)</td>
<td style="text-align:left">chr300</td>
<td>varchar2(300)</td>
</tr>
<tr>
<td style="text-align:left">num26_10</td>
<td>number(26,10)</td>
<td style="text-align:left">chr500</td>
<td>varchar2(500)</td>
</tr>
<tr>
<td style="text-align:left">chr2</td>
<td>varchar2(2)</td>
<td style="text-align:left">blob</td>
<td>blob</td>
</tr>
<tr>
<td style="text-align:left">chr4</td>
<td>varchar2(4)</td>
<td style="text-align:left">num15_3</td>
<td>number(15,3)</td>
</tr>
<tr>
<td style="text-align:left">chr5</td>
<td>varchar2(5)</td>
<td style="text-align:left">row_id</td>
<td>varchar2(18)</td>
</tr>
</tbody>
</table>
<h2 id="进阶使用--record">
  进阶使用&ndash;record
  <a class="anchor" href="#%e8%bf%9b%e9%98%b6%e4%bd%bf%e7%94%a8--record">#</a>
</h2>
<p>在实际业务中，我们经常使用的场景是，查询一个表每个字段的数据，更新/新增一个表所有字段。</p>
<p>有时候一个表的字段可能是几十个，这个时候我们再每个字段去单独定义，容易出错。并且之后表有所异动时，容易遗漏修改。</p>
<p>BDL为我们设计了一个可以简化整张表定义的语法。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span>define l_ima record <span style="color:#66d9ef">like</span> ima_file.<span style="color:#f92672">*</span>
</span></span></code></pre></div><blockquote>
<p>注意这种方式定义时，没有<code>end record</code></p>
</blockquote>
<p><code>ima_file.*</code> 就表示这个表所有字段。必须和record配置使用。
l_ima的结构体自动就包含了ima_file中的所有字段，使用<code>l_ima.ima01</code> <code>l_ima.ima02</code> <code>l_ima.ima021</code>即可调用这些字段。</p>
<h2 id="注意事项">
  注意事项
  <a class="anchor" href="#%e6%b3%a8%e6%84%8f%e4%ba%8b%e9%a1%b9">#</a>
</h2>
<p>BDL 使用<code>schema</code>文件，在编译时，会自动的将<code>schema</code>文件中的数据类型映射到<code>BDL</code>中的数据类型。所以如果数据库数据类型变化，或者字段变动，那么 BDL 对应的文件也需要重新编译。</p>
<blockquote>
<p>如果重新产生 schema 文件




<div class="book-tabs"><input type="radio" class="toggle" name="tabs-重新产生schema文件" id="tabs-重新产生schema文件-0" checked="checked" />
  <label for="tabs-重新产生schema文件-0">TIPTOP GP</label>
  <div class="book-tabs-content markdown-inner"><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>r.s2 ds <span style="color:#75715e">#ERP服务器中运行</span>
</span></span></code></pre></div></div><input type="radio" class="toggle" name="tabs-重新产生schema文件" id="tabs-重新产生schema文件-1"  />
  <label for="tabs-重新产生schema文件-1">T100</label>
  <div class="book-tabs-content markdown-inner"></div></div>
</p>
</blockquote>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">


  <div><a class="flex align-center" href="https://github.com/darcyjoven/bdl/commit/7fd5abd5878a63e39873ca064b6aa4e234022033" title='最后修改者 darcy | 2023年8月28日' target="_blank" rel="noopener">
      <img src="/svg/calendar.svg" class="book-icon" alt="Calendar" />
      <span>2023年8月28日</span>
    </a>
  </div>



  <div>
    <a class="flex align-center" href="https://github.com/darcyjoven/bdl/edit/main/content.zh/docs/BDL/2.medium/14.database/2.schema/index.md" target="_blank" rel="noopener">
      <img src="/svg/edit.svg" class="book-icon" alt="Edit" />
      <span>编辑本页</span>
    </a>
  </div>


</div>



  <script>(function(){function e(n){const e=window.getSelection(),t=document.createRange();t.selectNodeContents(n),e.removeAllRanges(),e.addRange(t)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script>


 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#数据表结构在-bdl-中的使用">数据表结构在 BDL 中的使用</a>
      <ul>
        <li><a href="#在-bdl-中使用-schema-定义变量">在 BDL 中使用 schema 定义变量</a></li>
        <li><a href="#进阶使用--record">进阶使用&ndash;record</a></li>
        <li><a href="#注意事项">注意事项</a></li>
      </ul>
    </li>
  </ul>
</nav>


 
      </div>
    </aside>
    
  </main>

  
</body>
</html>












